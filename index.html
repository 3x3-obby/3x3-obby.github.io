<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>3x3 Obby</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Play Obby online for free. Run and jump through tricky platforms, dodge hazards, and reach the goal. Unblocked fun. No downloads, no login." />
  <style>
    :root { --bar-h:56px; --bg:#0b0f14; --ink:#e7eef7; --muted:#9bb0c3; --accent:#4ad; --shadow: 0 10px 30px rgba(0,0,0,.35); }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    header{position:sticky;top:0;z-index:10;height:var(--bar-h);background:#111925;border-bottom:1px solid #1e2a38;display:flex;align-items:center;padding:0 10px;gap:10px}
    nav a{display:inline-flex;align-items:center;gap:8px;height:36px;padding:0 12px;border-radius:8px;text-decoration:none;color:var(--muted);border:1px solid transparent}
    nav a:hover{color:#fff;border-color:#223246}
    nav a.active{color:#fff;background:#18314d;border-color:#284b72}
    .spacer{flex:1}
    button.fullscreen{height:36px;min-width:36px;padding:0 12px;border-radius:8px;border:1px solid #2a3f59;background:#17314c;color:#fff;cursor:pointer}
    button.fullscreen:hover{background:#214769}
    #player-wrap{position:relative;height:calc(100vh - var(--bar-h))}
    #player{width:100%;height:100%;border:0;display:block;background:#000}

    /* Info floating button */
    .info-fab{position:fixed;right:16px;bottom:16px;z-index:20;display:inline-flex;align-items:center;gap:8px;
      padding:12px 14px;border-radius:999px;border:1px solid #2a3f59;background:#17314c;color:#fff;cursor:pointer;box-shadow:var(--shadow)}
    .info-fab:hover{background:#214769}

    /* Modal */
    .modal{position:fixed;inset:0;z-index:30;display:grid;place-items:center;opacity:0;pointer-events:none;transition:opacity .25s ease}
    .modal.open{opacity:1;pointer-events:auto}
    .modal .backdrop{position:absolute;inset:0;background:rgba(8,14,22,.65);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}
    .panel{position:relative;max-width:720px;width:min(92vw,720px);max-height:min(86vh,1000px);overflow:auto;background:#0f1a28;border:1px solid #284b72;border-radius:16px;box-shadow:var(--shadow);
      padding:20px 22px;transform:translateY(12px) scale(.98);transition:transform .25s ease, opacity .25s ease;opacity:0}
    .modal.open .panel{transform:translateY(0) scale(1);opacity:1}
    .panel h2{margin:0 0 8px 0;font-size:22px}
    .panel p{color:#cfe0f2;line-height:1.55;margin:10px 0}
    .meta{display:flex;flex-wrap:wrap;gap:10px;margin:8px 0 6px 0;color:#9bb0c3;font-size:14px}
    .kbd{display:inline-block;border:1px solid #3b5a80;border-radius:6px;padding:2px 8px;margin:2px 6px 2px 0;color:#e7eef7;background:#13263b}
    .close{position:absolute;top:10px;right:10px;height:36px;min-width:36px;padding:0 10px;border-radius:10px;border:1px solid #2a3f59;background:#17314c;color:#fff;cursor:pointer}
    .close:hover{background:#214769}
    @media (prefers-reduced-motion: reduce){
      .modal,.panel{transition:none}
    }
  </style>
  <meta name="google-site-verification" content="C5XoTNg5MPp3-p6btOyp6191yySnPudyk9ELJcBYqhM" />
</head>
<body>
  <header>
    <nav>
      <a href="index.html" class="active">Obby</a>
      <a href="idle-breakout.html">Idle Breakout</a>
      <a href="idle-dice.html">Idle Dice</a>
      <a href="block-blast.html">Block Blast</a>
    </nav>
    <div class="spacer"></div>
    <button class="fullscreen" id="fs-top">Fullscreen</button>
  </header>

  <main id="player-wrap">
    <iframe id="player"
      src="https://www.timestables.com/gf/obby/66/?language=en&tables_until=12&nocache=116"
      allow="fullscreen; autoplay; clipboard-read; clipboard-write"
      referrerpolicy="no-referrer"
      loading="eager"></iframe>
  </main>

  <!-- Floating Info Button -->
  <button class="info-fab" id="open-info" aria-haspopup="dialog" aria-controls="game-info">ℹ️ Game Info</button>

  <!-- Modal -->
  <div class="modal" id="game-info" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="gi-title">
    <div class="backdrop" data-close></div>
    <section class="panel">
      <button class="close" id="close-info" aria-label="Close">✕</button>
      <h2 id="gi-title">3x3 Obby</h2>
      <div class="meta">
        <span>Genre: Platformer • Runner</span>
        <span>Mode: Single-player</span>
      </div>
      <p><strong>Intro:</strong> Dash, jump, and weave through tricky obstacle courses. Time your moves, read the traps, and reach the finish without falling.</p>
      <p><strong>How to Play:</strong> Clear stages by getting to the goal as fast as you can. Precision and timing matter—use momentum and plan jumps ahead.</p>
      <p><strong>Controls:</strong></p>
      <p>
        <span class="kbd">W</span><span class="kbd">A</span><span class="kbd">S</span><span class="kbd">D</span> or
        <span class="kbd">Arrow Keys</span> — Move<br/>
        <span class="kbd">Space</span> — Jump<br/>
        <span class="kbd">R</span> — Restart (if supported)
      </p>
    </section>
  </div>

  <script>
    (function(){
      const wrap=document.getElementById('player-wrap');
      const btnTop=document.getElementById('fs-top');
      function toggleFS(){
        if(!document.fullscreenElement){
          (wrap.requestFullscreen||wrap.webkitRequestFullscreen||wrap.msRequestFullscreen).call(wrap);
        }else{
          (document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen).call(document);
        }
      }
      btnTop.addEventListener('click',toggleFS);
      document.addEventListener('fullscreenchange',()=>{btnTop.textContent=document.fullscreenElement?'Exit Fullscreen':'Fullscreen';});

      // Modal logic (smooth + Esc + backdrop)
      const modal = document.getElementById('game-info');
      const openBtn = document.getElementById('open-info');
      const closeBtn = document.getElementById('close-info');
      let lastFocus = null;
      function openModal(){
        lastFocus = document.activeElement;
        modal.classList.add('open');
        modal.setAttribute('aria-hidden','false');
        closeBtn.focus({preventScroll:true});
      }
      function closeModal(){
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
        if(lastFocus) lastFocus.focus({preventScroll:true});
      }
      openBtn.addEventListener('click', openModal);
      closeBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', (e)=>{ if(e.target.hasAttribute('data-close')) closeModal(); });
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && modal.classList.contains('open')) closeModal(); });
    })();
  </script>
</body>
</html>
